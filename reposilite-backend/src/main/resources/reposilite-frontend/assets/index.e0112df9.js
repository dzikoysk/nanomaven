var Ie=Object.defineProperty;var le=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var ie=(o,t,r)=>t in o?Ie(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,ce=(o,t)=>{for(var r in t||(t={}))Te.call(t,r)&&ie(o,r,t[r]);if(le)for(var r of le(t))Ce.call(t,r)&&ie(o,r,t[r]);return o};import{r as q,a as de,u as ue,w as D,d as Ee,b as Se,c as m,o as d,e as u,f as a,g,t as k,h as C,n as ee,i as pe,E as Le,S as Me,j as f,k as x,l as Oe,m as G,v as K,p as qe,q as A,s as _e,x as me,y as B,z as E,A as P,P as Ae,B as Be,C as H,D as te,F as S,G as O,T as Pe,H as Re,I as je,J as Ve,K as De,L as ge,M as He,N as Ne,O as ze,Q as Ue,R as We,U as Ge}from"./vendor.18f96a99.js";const Ke=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}};Ke();const N=q({isDark:!1}),he="dark-theme";function fe(){return{theme:N,fetchTheme:()=>{N.isDark=localStorage.getItem(he)==="true"},toggleTheme:()=>{N.isDark=!N.isDark,localStorage.setItem(he,N.isDark)}}}function V(){const o=!"{{REPOSILITE.BASE_PATH}}".includes("REPOSILITE.BASE_PATH"),t=o?"{{REPOSILITE.BASE_PATH}}":"/",r=o?"{{REPOSILITE.ID}}":"reposilite-repository",e=o?"{{REPOSILITE.TITLE}}":"Reposilite Repository",s=o?"{{REPOSILITE.DESCRIPTION}}":"Public Maven repository hosted through the Reposilite",i=o?"{{REPOSILITE.ORGANIZATION_WEBSITE}}":location.protocol+"//"+location.host+t;return{available:o,basePath:t,id:r,title:e,description:s,organizationWebsite:i,organizationLogo:o?"{{REPOSILITE.ORGANIZATION_LOGO}}":"https://avatars.githubusercontent.com/u/75123628?s=200&v=4",icpLicense:o?"{{REPOSILITE.ICP_LICENSE}}":"\u56FDICP\u5907000000000\u53F7"}}const{basePath:Fe}=V(),oe=()=>window.location.protocol+"//"+location.host+Fe,Qe=()=>oe().endsWith("/")?oe().slice(0,-1):oe(),F=o=>Qe()+o,ne=(o,t)=>{const r=()=>o&&t?e(o,t):{},e=(n,l)=>({headers:{Authorization:`xBasic ${btoa(`${n}:${l}`)}`}}),s=(n,l)=>(l=l||r(),de.get(F(n),ce({},l)));return{createURL:F,client:{auth:{me(n,l){return s("/api/auth/me",e(n,l))}},console:{},maven:{content(n){return s(`/${n}`)},details(n){return s(`/api/maven/details/${n||""}`)}}}}},L="",ve="session-token-name",be="session-token-secret",Ye="access-token:manager",Q=q({name:L,secret:L}),ye={id:L,name:L,createdAt:L,permissions:[],routes:[]},Y=q({details:ye});function z(){const o=(n,l)=>{localStorage.setItem(ve,n),Q.name=n,localStorage.setItem(be,l),Q.secret=l},t=()=>{o(L,L),Y.details=ye},r=async(n,l)=>{try{const{client:p}=ne();if(n==L)throw new Error("Missing credentials");const c=await p.auth.me(n,l);return o(n,l),Y.details=c.data,{token:Q,session:Y}}catch(p){throw t(),p}};return{token:Q,session:Y,login:r,logout:t,fetchSession:()=>r(localStorage.getItem(ve),localStorage.getItem(be)),isLogged:n=>(n==null?void 0:n.name)!=L,isManager:n=>{var l;return(l=n==null?void 0:n.permissions)==null?void 0:l.find(p=>p.identifier==Ye)}}}const Z=q({watchable:0,path:""});function Ze(o){const t=ue();return D(()=>t.params.qualifier,r=>{Z.path=r,Z.watchable++},{immediate:!0}),D(()=>o.name,r=>Z.watchable++),{qualifier:Z}}var v=(o,t)=>{for(const[r,e]of t)o[r]=e;return o};const Je=Ee({setup(){const{title:o,description:t,organizationLogo:r,icpLicense:e}=V();Se({title:o,description:t});const{theme:s,fetchTheme:i}=fe(),{fetchSession:n,token:l,session:p}=z(),{qualifier:c}=Ze(l);return i(),n().catch(h=>{}),{theme:s,qualifier:c,token:l,session:p,icpLicense:e}}}),Xe={class:"min-h-screen dark:bg-black dark:text-white"},et={key:0,class:"absolute h-8 pb-2 w-full text-center text-xs dark:bg-black dark:text-white"},tt={href:"https://beian.miit.gov.cn",target:"_blank"};function ot(o,t,r,e,s,i){const n=m("router-view");return d(),u("div",{class:ee({dark:o.theme.isDark})},[a("div",Xe,[g(n,{class:"router-view-full",qualifier:o.qualifier,token:o.token,session:o.session},null,8,["qualifier","token","session"]),o.icpLicense?(d(),u("div",et,[a("a",tt,k(o.icpLicense),1)])):C("",!0)])],2)}var nt=v(Je,[["render",ot]]);const st={},rt={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},at=a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),lt=[at];function it(o,t){return d(),u("svg",rt,lt)}var ct=v(st,[["render",it]]);const dt={components:{GlobeIcon:ct},setup(){const{description:o,organizationWebsite:t,organizationLogo:r}=V();return{description:o,organizationWebsite:t,organizationLogo:r}}},ut={class:"bg-gray-100 dark:bg-black"},pt={class:"container mx-auto flex flex-row <sm:flex-col <sm:items-center"},_t={class:"w-35 <sm:mb-2"},mt=["src"],gt={class:"flex flex-col justify-center px-10 <sm:px-0"},ht={class:"<sm:text-center"},ft={class:"flex flex-row py-2 <sm:justify-center"},vt=["href"];function bt(o,t,r,e,s,i){const n=m("GlobeIcon");return d(),u("div",ut,[a("div",pt,[a("div",_t,[a("img",{class:"border-2 rounded-full dark:border-gray-700",src:e.organizationLogo},null,8,mt)]),a("div",gt,[a("div",ht,k(e.description),1),a("div",ft,[g(n),a("a",{class:"px-3 text-gray-500",href:e.organizationWebsite},k(e.organizationWebsite),9,vt)])])])])}var yt=v(dt,[["render",bt]]);const kt={},xt={class:"mx-2 py-1.5 rounded-full bg-white dark:bg-gray-900 font-bold px-6 text-sm cursor-pointer min-w-93px"};function wt(o,t){return d(),u("div",xt,[pe(o.$slots,"default")])}var $t=v(kt,[["render",wt]]);const It={inheritAttrs:!1,components:{VueFinalModal:Le,ModalsContainer:Me},setup(){const{login:o}=z(),t=f(!1),r=f(""),e=f(""),s=()=>t.value=!1;return{name:r,secret:e,close:s,showLogin:t,signin:(n,l)=>{o(n,l).then(p=>A(`Dashboard accessed as ${n}`,{position:"bottom-right"})).then(p=>s()).catch(p=>{console.log(p),A(`${p.response.status}: ${p.response.data.message}`,{type:"danger"})})}}}},Tt=o=>(_e("data-v-1d9af69e"),o=o(),me(),o),Ct={class:"relative border bg-white dark:bg-gray-900 border-gray-100 dark:border-black m-w-20 py-5 px-10 rounded-2xl shadow-xl text-center"},Et=Tt(()=>a("p",{class:"font-bold text-xl pb-4"},"Login with access token",-1)),St={class:"text-right mt-1"};function Lt(o,t,r,e,s,i){const n=m("vue-final-modal");return d(),u("div",null,[g(n,qe({modelValue:e.showLogin,"onUpdate:modelValue":t[6]||(t[6]=l=>e.showLogin=l)},o.$attrs,{classes:"flex justify-center items-center"}),{default:x(()=>[a("div",Ct,[Et,a("form",{class:"flex flex-col w-96",onSubmit:t[4]||(t[4]=Oe(l=>e.signin(e.name,e.secret),["prevent"]))},[G(a("input",{placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=l=>e.name=l),type:"text",class:"input"},null,512),[[K,e.name]]),G(a("input",{placeholder:"Secret","onUpdate:modelValue":t[1]||(t[1]=l=>e.secret=l),type:"password",class:"input"},null,512),[[K,e.secret]]),a("div",St,[a("button",{onClick:t[2]||(t[2]=l=>e.close()),class:"text-blue-400 text-xs"},"\u2190 Back to index")]),a("div",{class:"bg-gray-100 dark:bg-gray-800 py-2 my-3 rounded-md cursor-pointer",onClick:t[3]||(t[3]=l=>e.signin(e.name,e.secret))},"Sign in")],32),a("button",{class:"absolute top-0 right-0 mt-5 mr-5",onClick:t[5]||(t[5]=l=>e.close())},"\u{1F5D9}")])]),_:1},16,["modelValue"]),a("div",{onClick:t[7]||(t[7]=l=>e.showLogin=!0)},[pe(o.$slots,"button",{},void 0,!0)])])}var Mt=v(It,[["render",Lt],["__scopeId","data-v-1d9af69e"]]);const Ot={},qt={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},At=a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1),Bt=[At];function Pt(o,t){return d(),u("svg",qt,Bt)}var Rt=v(Ot,[["render",Pt]]);const jt={},Vt={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Dt=a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1),Ht=[Dt];function Nt(o,t){return d(),u("svg",Vt,Ht)}var zt=v(jt,[["render",Nt]]);const Ut={components:{MenuButton:$t,LoginModal:Mt,MoonIcon:Rt,SunIcon:zt},props:{token:{type:Object,required:!0}},setup(o){const{theme:t,toggleTheme:r}=fe(),{title:e}=V(),{isLogged:s,logout:i}=z(),n=o.token,l=B(()=>s(n));return{token:n,title:e,logged:l,signout:()=>i(),theme:t,toggleTheme:r}}},Wt={class:"flex flex-row"},Gt={key:0,class:"pt-1.1 px-2"},Kt=P(" Welcome "),Ft={class:"font-bold underline"},Qt=P(" Sign in "),Yt=P(" Logout ");function Zt(o,t,r,e,s,i){const n=m("MenuButton"),l=m("LoginModal"),p=m("SunIcon"),c=m("MoonIcon");return d(),u("nav",Wt,[e.logged?(d(),u("div",Gt,[Kt,a("span",Ft,k(e.token.name),1)])):C("",!0),g(l,null,{button:x(()=>[e.logged?C("",!0):(d(),E(n,{key:0},{default:x(()=>[Qt]),_:1}))]),_:1}),e.logged?(d(),E(n,{key:1,onClick:t[0]||(t[0]=h=>e.signout())},{default:x(()=>[Yt]),_:1})):C("",!0),a("div",{class:"pl-2 pt-1.3 cursor-pointer rounded-full bg-white dark:bg-gray-900 max-h-33px",onClick:t[1]||(t[1]=h=>e.toggleTheme())},[e.theme.isDark?(d(),E(p,{key:0,class:"mr-1.9"})):(d(),E(c,{key:1,class:"mr-1.5"}))])])}var Jt=v(Ut,[["render",Zt]]);const Xt={components:{Hero:yt,Menu:Jt},props:{token:{type:Object,required:!0}},setup(o){const t=o.token,{title:r}=V();return{token:t,title:r}}},eo={class:"bg-gray-100 dark:bg-black dark:text-white"},to={class:"container mx-auto flex flex-row py-10 justify-between <sm:pb-2"},oo={class:"text-xl font-medium py-1"};function no(o,t,r,e,s,i){const n=m("router-link"),l=m("Menu"),p=m("Hero");return d(),u("header",eo,[a("div",to,[a("h1",oo,[g(n,{to:"/"},{default:x(()=>[P(k(e.title),1)]),_:1})]),g(l,{token:e.token,class:"mt-0.5"},null,8,["token"])]),g(p,{class:"pt-2 pb-11 <sm:pb-4"})])}var so=v(Xt,[["render",no]]);function ro(){return{createSnippets:(t,r,e)=>[{name:"Maven",lang:"xml",snippet:`
<dependency>
  <groupId>${t}</groupId>
  <artifactId>${r}</artifactId>
  <version>${e}</version>
</dependency>`.trim()},{name:"Gradle Groovy",lang:"xml",snippet:`implementation "${t}:${r}:${e}"`},{name:"Gradle Kotlin",lang:"kotlin",snippet:`implementation("${t}:${r}:${e}")`},{name:"SBT",lang:"scala",snippet:`"${t}" %% "${r}" %% "${e}"`}]}}function ao(){const{id:o,title:t}=V();return{createRepositories:e=>{const s=B(()=>e.path.split("/")[0]),i=o+(e.path?`-${s.value}`:""),n=location.protocol+"//"+location.host+(e.path?`/${s.value}`:"/{repository}");return[{name:"Maven",lang:"xml",snippet:`
<repository>
  <id>${i}</id>
  <name>${t}</name>
  <url>${n}</url>
</repository>
        `.trim()},{name:"Gradle Groovy",lang:"groovy",snippet:`maven {
    url "${n}"
 }`.trim()},{name:"Gradle Kotlin",lang:"kotlin",snippet:`maven {
    url = uri("${n}")
}`},{name:"SBT",lang:"scala",snippet:`resolvers += "${i}" at "${n}"`}]}}}const lo=new DOMParser;function io(){return{parseMetadata:s=>lo.parseFromString(s,"text/xml"),groupId:s=>{var i,n;return(n=(i=s==null?void 0:s.getElementsByTagName("groupId")[0])==null?void 0:i.firstChild)==null?void 0:n.nodeValue},artifactId:s=>{var i,n;return(n=(i=s==null?void 0:s.getElementsByTagName("artifactId")[0])==null?void 0:i.firstChild)==null?void 0:n.nodeValue},versions:s=>{var i,n,l;return(l=(n=Array.from((i=s==null?void 0:s.getElementsByTagName("versioning")[0])==null?void 0:i.children))==null?void 0:n.map(p=>p.firstChild.nodeValue))!=null?l:["{unknown}"]}}}const co={},uo={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},po=a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},null,-1),_o=[po];function mo(o,t){return d(),u("svg",uo,_o)}var go=v(co,[["render",mo]]);const ho={},fo={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},vo=a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1),bo=[vo];function yo(o,t){return d(),u("svg",fo,bo)}var ko=v(ho,[["render",yo]]);const xo={components:{PrismEditor:Ae,CopyIcon:go,DownIcon:ko},props:{qualifier:{type:Object,required:!0},token:{type:Object,required:!0}},setup(o){const t=o.qualifier,r=o.token,e=f(""),s=f([]),{createRepositories:i}=ao(),{createSnippets:n}=ro(),{parseMetadata:l,groupId:p,artifactId:c,versions:h}=io(),{client:_}=ne(r.name,r.secret),{copy:I,isSupported:b}=Be(),w=f(localStorage.getItem("card-tab")||"Maven"),R=f(localStorage.getItem("dropdown-open")||!1);H(()=>localStorage.setItem("card-tab",w.value)),H(()=>localStorage.setItem("dropdown-open",R.value));const U=()=>{s.value=i(t),e.value="Repository details"},M=T=>{const y=l(T);s.value=n(p(y),c(y),h(y)[0]),e.value="Artifact details"};H(()=>{const T=t.path.split("/");if(T.length==1&&T[0]==""){U();return}_.maven.content(`${t.path}/maven-metadata.xml`).then(y=>M(y.data)).catch(y=>{y.message!=="Request failed with status code 404"&&console.log(y),U()})}),H(()=>{s.value.forEach(T=>{T.highlighter=y=>{var W;return te.highlight(y,(W=te.languages[T.lang])!=null?W:te.languages.js)}})});const j=f("slide-right");return D(w,(T,y)=>{const W=s.value.findIndex(X=>X.name===T),$e=s.value.findIndex(X=>X.name===y);j.value=W-$e<0?"slide-left":"slide-right"}),{title:e,configurations:s,selectedTab:w,transitionName:j,copy:async()=>{const{snippet:T}=s.value.find(y=>y.name===w.value);return await I(T),A("Copied snippet",{type:"info"})},isCopySupported:b,dropdownOpen:R}}},wo={class:"bg-white dark:bg-gray-900 shadow-lg p-7 rounded-xl border-gray-100 dark:border-black"},$o={class:"flex flex-row justify-between"},Io={class:"font-bold flex items-center w-full"},To={class:"flex <sm:hidden"},Co=["onClick"],Eo={class:"hidden flex-col items-center mt-24px <sm:flex"},So={class:"w-20px h-25px float-right m-auto flex items-center"},Lo={key:0,class:"rounded-lg w-full box-border p-2 bg-true-gray-100 dark:bg-dark-600"},Mo=["onClick"],Oo=a("hr",{class:"dark:border-gray-800 <sm:hidden"},null,-1),qo={class:"overflow-hidden"};function Ao(o,t,r,e,s,i){const n=m("copy-icon"),l=m("down-icon"),p=m("prism-editor");return d(),u("div",wo,[a("div",$o,[a("h1",Io,[P(k(e.title)+" ",1),e.isCopySupported?(d(),u("span",{key:0,onClick:t[0]||(t[0]=(...c)=>e.copy&&e.copy(...c)),class:"ml-auto cursor-pointer"},[g(n)])):C("",!0)])]),a("div",To,[(d(!0),u(S,null,O(e.configurations,c=>(d(),u("div",{key:c.name,onClick:h=>e.selectedTab=c.name,class:ee(["py-4 px-7 flex-grow text-center border-b-2 cursor-pointer border-transparent",{"!border-gray-800":c.name===e.selectedTab}])},k(c.name),11,Co))),128))]),a("div",Eo,[a("div",{class:"w-full box-border py-5px p-2 rounded-lg border-1 border-true-gray-200 dark:border-dark-300",onClick:t[1]||(t[1]=c=>e.dropdownOpen=!e.dropdownOpen)},[P(k(e.selectedTab)+" ",1),a("div",So,[g(l)])]),e.dropdownOpen?C("",!0):(d(),u("ul",Lo,[(d(!0),u(S,null,O(e.configurations,c=>(d(),u("li",{key:c.name,onClick:h=>{e.selectedTab=c.name,e.dropdownOpen=!e.dropdownOpen},class:ee(["dropdown py-1",{hidden:c.name===e.selectedTab}])},k(c.name),11,Mo))),128))]))]),Oo,a("div",qo,[g(Pe,{name:e.transitionName,mode:"out-in"},{default:x(()=>[(d(),u("div",{key:e.selectedTab,class:"relative h-33 mt-6 p-4 mr-1 rounded-lg bg-gray-100 dark:bg-gray-800"},[(d(!0),u(S,null,O(e.configurations,c=>(d(),u(S,null,[c.name===e.selectedTab?(d(),E(p,{key:0,class:"snippet absolute text-sm",modelValue:c.snippet,"onUpdate:modelValue":h=>c.snippet=h,highlight:c.highlighter,readonly:"","line-numbers":""},null,8,["modelValue","onUpdate:modelValue","highlight"])):C("",!0)],64))),256))]))]),_:1},8,["name"])])])}var Bo=v(xo,[["render",Ao]]);const Po={props:{file:{type:Object,required:!0}},setup(o){return{file:o.file,prettyBytes:Re}}},Ro={class:"flex flex-row justify-between mb-1.5 py-3 rounded-full bg-white dark:bg-gray-900 lg:max-w-2/5 xl:max-w-1/2 cursor-pointer"},jo={class:"flex flex-row"},Vo={key:0,class:"text-xm px-6 pt-1.75"},Do={key:1,class:"text-xm px-6 pt-1.75"},Ho={class:"font-semibold"},No={key:0,class:"px-6"};function zo(o,t,r,e,s,i){return d(),u("div",Ro,[a("div",jo,[e.file.type=="DIRECTORY"?(d(),u("div",Vo,"\u26AB")):(d(),u("div",Do,"\u26AA")),a("div",Ho,k(e.file.name),1)]),e.file.contentLength?(d(),u("div",No,k(e.prettyBytes(e.file.contentLength)),1)):C("",!0)])}var Uo=v(Po,[["render",zo]]);const Wo={components:{Card:Bo,Entry:Uo},props:{qualifier:{type:Object,required:!0},token:{type:Object,required:!0}},setup(o){const t=o.qualifier,r=o.token,e=f(""),s=f([]),i=f(!1),n=f(void 0),l=_=>_.type=="DIRECTORY",p=ue(),c=_=>(_.endsWith("/")?_.slice(0,-1):_).split("/").slice(0,-1).join("/")||"/";D(()=>t.watchable,async _=>{const{client:I}=ne(r.name,r.secret);I.maven.details(t.path).then(b=>{s.value=b.data.files,i.value=s.value.length==0,n.value=void 0}).catch(b=>{console.log(b),A(`${b.response.status}: ${b.response.data.message}`,{type:"danger"}),n.value=b}),e.value=c(`/${t.path}`)},{immediate:!0});const h=B(()=>{const _=p.path.split("/");return _.map((I,b)=>({link:_.slice(0,b+1).join("/")||"/",name:b===_.length-1?I:I+"/"}))});return{qualifier:t,token:r,parentPath:e,files:s,isEmpty:i,isErrored:n,isDirectory:l,createURL:F,breadcrumbs:h}}},Go={class:"bg-gray-100"},Ko={class:"bg-gray-100 dark:bg-black"},Fo={class:"container mx-auto"},Qo={class:"pt-7 pb-3 pl-2 font-semibold"},Yo=a("span",{class:"select-none"},"Index of ",-1),Zo={class:"select-text"},Jo=a("span",{class:"font-normal text-xl text-gray-500 select-none"}," \u2934 ",-1),Xo={class:"dark:bg-black"},en={class:"container mx-auto relative min-h-320px mb-1.5"},tn={class:"lg:absolute pt-5 -top-5 right-8"},on={class:"pt-4"},nn=["href"],sn={key:0},rn=a("p",null,"Directory is empty",-1),an=[rn],ln={key:1},cn=a("p",null,"Directory not found",-1),dn=[cn];function un(o,t,r,e,s,i){const n=m("router-link"),l=m("Card"),p=m("Entry");return d(),u("div",Go,[a("div",Ko,[a("div",Fo,[a("p",Qo,[Yo,a("span",Zo,[(d(!0),u(S,null,O(e.breadcrumbs,c=>(d(),E(n,{key:c.link,to:c.link},{default:x(()=>[P(k(c.name),1)]),_:2},1032,["to"]))),128))]),g(n,{to:e.parentPath},{default:x(()=>[Jo]),_:1},8,["to"])])])]),a("div",Xo,[a("div",en,[a("div",tn,[g(l,{qualifier:e.qualifier,token:e.token},null,8,["qualifier","token"])]),a("div",on,[(d(!0),u(S,null,O(e.files,c=>(d(),u("div",{key:c},[e.isDirectory(c)?(d(),E(n,{key:0,to:o.append(o.$route.path,c.name)},{default:x(()=>[g(p,{file:c},null,8,["file"])]),_:2},1032,["to"])):(d(),u("a",{key:1,href:e.createURL(o.$route.path+"/"+c.name),target:"_blank"},[g(p,{file:c},null,8,["file"])],8,nn))]))),128)),e.isEmpty?(d(),u("div",sn,an)):C("",!0),e.isErrored?(d(),u("div",ln,dn)):C("",!0)])])])])}var pn=v(Wo,[["render",un]]);const _n={},mn={class:"container mx-auto pt-10 px-15"},gn=a("i",null,"Endpoints :: soon\u2122",-1),hn=[gn];function fn(o,t){return d(),u("div",mn,hn)}var vn=v(_n,[["render",fn]]);const ke=["Other","Trace","Debug","Info","Warn","Error"],se=q({}),xe=f(""),bn=f(0),J=q([]),yn=new je,kn=o=>{var t;return(t=ke.find(r=>o.includes(`${r.toUpperCase()} | `)))!=null?t:"Other"},we=o=>yn.toHtml(o.replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;"));function xn(){ke.forEach(e=>{se[e]={name:e,enabled:!0,count:B(()=>J.reduce((s,i)=>s+(i.level===e),0))}});const o=B(()=>J.filter(e=>e.message.toLowerCase().includes(xe.value.toLowerCase())).filter(e=>se[e.level].enabled));return{levels:se,log:o,filter:xe,sanitizeMessage:we,logMessage:e=>{J.push({id:bn.value++,message:we(e),level:kn(e)})},clearLog:()=>{J.length=0}}}const $=f(),re=f("");function wn(){const o=F("/api/console/sock").replace("https","wss").replace("http","ws"),t=()=>{var c;return((c=$.value)==null?void 0:c.readyState)===WebSocket.OPEN},r=()=>{t()&&$.value.close()},e=()=>{$.value.send(re.value),re.value=""},s=f(),i=f(),n=f(),l=f();return{connection:$,connect:c=>{try{$.value=new WebSocket(o),$.value.onopen=()=>{$.value.send(`Authorization:${c.name}:${c.secret}`),s==null||s.value()},$.value.onmessage=_=>{_.data!="keep-alive"&&(i==null||i.value(_.data))},$.value.onerror=_=>n==null?void 0:n.value(_),$.value.onclose=()=>l==null?void 0:l.value();const h=setInterval(()=>{var _;t()?(_=$==null?void 0:$.value)==null||_.send("keep-alive"):clearInterval(h)},1e3*5)}catch(h){console.log(h),n==null||n.value(h)}},close:r,onOpen:s,onMessage:i,onError:n,onClose:l,command:re,execute:e}}const $n={props:{selectedTab:{type:Object,required:!0}},setup(o){const t=o.selectedTab,{levels:r,log:e,logMessage:s,filter:i,clearLog:n}=xn(),{onOpen:l,onMessage:p,onClose:c,onError:h,connect:_,close:I,command:b,execute:w}=wn();Ve(()=>I());const R=()=>{const M=document.getElementById("console");M.scrollTop=M.scrollHeight},U=()=>{A("Connecting to the remote console",{type:"info"});const{token:M}=z();l.value=()=>n(),p.value=j=>{s(j),ge(()=>R())},h.value=j=>A(`${j||""}`,{type:"danger"}),c.value=()=>A("Connection with console has been lost",{type:"danger"}),_(M),ge(()=>setTimeout(()=>document.getElementById("consoleInput").focus(),1e3))};return D(()=>t.value,M=>M==="Console"?U():I(),{immediate:!0}),{log:e,command:b,execute:w,levels:r,filter:i}}},In={class:"container mx-auto pt-10 px-15 pb-10 text-xs"},Tn={class:"flex text-sm flex-col xl:flex-row w-full py-2 justify-between"},Cn={class:"flex flex-row justify-around w-full xl:w-1/2"},En=["checked","onChange"],Sn={class:"pl-2 pr-4"},Ln={class:"bg-white dark:bg-gray-900 rounded-lg"},Mn={id:"console",class:"overflow-scroll h-144 px-4"},On=["innerHTML"],qn=a("hr",{class:"dark:border-dark-300"},null,-1);function An(o,t,r,e,s,i){return d(),u("div",In,[a("div",Tn,[G(a("input",{placeholder:"Filter","onUpdate:modelValue":t[0]||(t[0]=n=>e.filter=n),class:"w-full xl:w-1/2 mr-5 py-1 px-4 rounded-lg bg-white dark:bg-gray-900"},null,512),[[K,e.filter]]),a("div",Cn,[(d(!0),u(S,null,O(e.levels,n=>(d(),u("div",{key:n.name,class:"pt-1.9 xl:pt-0.8 font-sans"},[a("input",{type:"checkbox",checked:n.enabled,onChange:l=>n.enabled=!n.enabled},null,40,En),a("span",Sn,k(n.name)+" ("+k(n.count)+")",1)]))),128))])]),a("div",Ln,[a("div",Mn,[(d(!0),u(S,null,O(e.log,n=>(d(),u("p",{key:n.id,innerHTML:n.message,class:"whitespace-nowrap"},null,8,On))),128))]),qn,G(a("input",{id:"consoleInput",placeholder:"Type command or '?' to get help",class:"w-full py-2 px-4 rounded-b-lg bg-white dark:bg-gray-900 dark:text-white","onUpdate:modelValue":t[1]||(t[1]=n=>e.command=n),onKeyup:t[2]||(t[2]=De(n=>e.execute(),["enter"]))},null,544),[[K,e.command]])])])}var Bn=v($n,[["render",An]]);const Pn={components:{Header:so,Browser:pn,Endpoints:vn,Console:Bn},props:{qualifier:{type:Object,required:!0},token:{type:Object,required:!0},session:{type:Object,required:!0}},setup(o){const t=o.qualifier,r=o.token,e=o.session,{isManager:s}=z(),i=q({value:localStorage.getItem("selectedTab")||"Overview"});H(()=>localStorage.setItem("selectedTab",i.value));const n=[{name:"Overview"},{name:"Endpoints"},{name:"Console",manager:!0}],l=B(()=>n.filter(c=>!(c==null?void 0:c.manager)||s(e.details)).map(c=>c.name)),p=B(()=>l.value.some(c=>c=="Console"));return{qualifier:t,token:r,isManager:s,menuTabs:l,consoleEnabled:p,selectedTab:i}}},Rn=o=>(_e("data-v-63b115f1"),o=o(),me(),o),jn={class:"bg-gray-100 dark:bg-black"},Vn={class:"container mx-auto"},Dn=Rn(()=>a("hr",{class:"dark:border-gray-700"},null,-1)),Hn={class:"overflow-auto"};function Nn(o,t,r,e,s,i){const n=m("Header"),l=m("tab"),p=m("tabs"),c=m("Browser"),h=m("tab-panel"),_=m("Endpoints"),I=m("Console"),b=m("tab-panels");return d(),u("div",null,[g(n,{token:e.token},null,8,["token"]),a("div",jn,[a("div",Vn,[g(p,{modelValue:e.selectedTab.value,"onUpdate:modelValue":t[0]||(t[0]=w=>e.selectedTab.value=w)},{default:x(()=>[(d(!0),u(S,null,O(e.menuTabs,(w,R)=>(d(),E(l,{class:"item font-normal",key:`menu${R}`,val:w,label:w,indicator:!0},null,8,["val","label"]))),128))]),_:1},8,["modelValue"])]),Dn,a("div",Hn,[g(b,{modelValue:e.selectedTab.value,"onUpdate:modelValue":t[1]||(t[1]=w=>e.selectedTab.value=w),animate:!0},{default:x(()=>[g(h,{val:"Overview"},{default:x(()=>[g(c,{qualifier:e.qualifier,token:e.token,ref:""},null,8,["qualifier","token"])]),_:1}),g(h,{val:"Endpoints"},{default:x(()=>[g(_)]),_:1}),e.consoleEnabled?(d(),E(h,{key:0,val:"Console"},{default:x(()=>[g(I,{selectedTab:e.selectedTab},null,8,["selectedTab"])]),_:1})):C("",!0)]),_:1},8,["modelValue"])])])])}var zn=v(Pn,[["render",Nn],["__scopeId","data-v-63b115f1"]]);const Un=He({history:Ne(),routes:[{path:"/:qualifier(.*)",name:"Index",component:zn}]});const ae=ze(nt);ae.config.globalProperties.append=(o,t)=>o+(o.endsWith("/")?"":"/")+t;ae.config.globalProperties.drop=o=>(o.endsWith("/")?o.slice(0,-1):o).split("/").slice(0,-1).join("/");ae.use(Ue()).use(We,de).use(Ge).use(Un).mount("#app");
